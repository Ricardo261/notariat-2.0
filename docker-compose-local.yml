version: '3'
services: 
    annuaire: 
        build: 
            context: ./annuaireFastApi
            dockerfile: Dockerfile
        container_name: annuaireFastApi
        volumes:
            - ./annuaireFastApi:/app
        ports:
            - "8000:8000"
        command: uvicorn main:app --host 0.0.0.0 --port 8000

    website:
        build: 
            context: ./frontend
            dockerfile: Dockerfile
        container_name: frontend
        ports:
            - "3000:3000"        
        volumes: 
            - ./frontend:/frontend
        command: npm start
        
    authentification:
        build:
            context: ./authentification
            dockerfile: Dockerfile
        container_name: node-docker
        ports:
            - "8080:8080"
        command: node index.js

    appsmith:
        image: index.docker.io/appsmith/appsmith-ce
        container_name: appsmith
        ports:
            - "80:80"
            - "443:443"
        volumes:
            - ./stacks:/appsmith-stacks
        restart: unless-stopped   